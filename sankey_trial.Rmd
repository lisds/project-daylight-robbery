```{python}
# %matplotlib inline
import matplotlib.pyplot as plt
#import plotly.express as px
import matplotlib.sankey as Sankey
import numpy as np
import pandas as pd
from projtools.data import Data

data = Data()

#sankey diagrams of an offence broken down by borough
```

```{python}
data.borough
```

```{python}
sankey_v = data.borough.T.groupby(level='year').sum().sum()
sankey_df = pd.DataFrame(sankey_v, columns=['count'])
```

```{python}
#sankey_df.groupby('category')[['borough']].sum()
```

```{python}
sankey_df = sankey_df.reset_index()
```

```{python}
sankey_df = sankey_df.set_index('offence')
```

```{python}
sankey_df
```

```{python}
#df.loc['Arson and Criminal Damage',:].sum()
```

```{python}
df = sankey_df.groupby(['category', 'borough'])[['count']].sum()
pos_values = list(df.loc['Arson and Criminal Damage', :]['count'].values)
keys = list(df.loc['Arson and Criminal Damage', :]['count'].keys())
#list(df['count'].values)
# val = list(dic_acd.values())
#dic_acd
# key
neg_values = [-x for x in pos_values]
# neg_values
```

```{python}
# fig = plt.figure(figsize=(10, 15))
# ax = fig.add_subplot()

# sankey = Sankey.Sankey(ax=ax, scale=0.0015, offset=0.3)
# sankey.add(flows=[(10928170)],
#            labels=['Total ACD Offences'],
#           pathlengths=10).add(flows=neg_values,
#            labels=keys,
#            orientations=-1,
#            pathlengths=100).finish()
# #sankey
# #plt.sankey.Sankey(flows=[0.25, 0.15, 0.60], labels=['', '', ''], orientations=[-1, 1, 0]).finish()
# plt.title('Sankey Diagram')
# plt.show()

# neg_values = np.array(neg_values)
# neg_values = (neg_values/814844)*100
# neg_values
```

```{python}
# fig = plt.figure(figsize=(10, 10))
# ax = fig.add_subplot()

# sankey = Sankey.Sankey(ax=ax)
# sankey.add(flows=[(100)],
#            labels=['Total ACD Offences']).add(flows=neg_values, orientations=[-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1],
#            labels=keys).finish()
# # plt.xticks(keys, rotation='vertical')
# # for d in diagrams:
# #     for t in d.texts:
# #         t.set_verticalalignment('center')
# ax.text(0, 0, keys, rotation=90)
# sankey
# #plt.sankey.Sankey(flows=[0.25, 0.15, 0.60], labels=['', '', ''], orientations=[-1, 1, 0]).finish()
# # plt.title('Sankey Diagram')
# #plt.show()
# #-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1
# orientations=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],
# diagrams
```

```{python}
#change
```
